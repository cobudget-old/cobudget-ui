module.exports = (Restangular, BucketModel, ContributionModel) ->

  get: (bucketId)->
    Restangular.one('buckets', bucketId).get()
    .then (bucket) ->
      new BucketModel(bucket.plain())

  create: (bucket) ->
    Restangular.all('buckets').post(bucket)
    .then (bucket) ->
      new BucketModel(bucket.plain())

  getBucketAllocations: (bucketId)->
    Restangular.one('buckets', bucketId).getList('allocations')

  sumBucketAllocations: (bucket)->
    sum = 0
    for allocation in bucket.allocations
      sum += allocation.amount
    sum
