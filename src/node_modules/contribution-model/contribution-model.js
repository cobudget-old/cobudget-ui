/* @ngInject */
module.exports = function (BaseModel, UserModel) {
  return BaseModel.extend({
    modelType: 'Contribution',

    props: {
      amount: 'decimal',
      bucketId: 'number',
    },

    children: {
      user: UserModel,
    },

    initialize: function () {
      this.on('change:bucketId', function () {
        // HACK because API doesn't include bucketId
        // if unset bucketId, set it back
        if (!this.bucketId) {
          this.bucketId = this.previousAttributes().bucketId;
        }
      }, this);
    },
  });
};
