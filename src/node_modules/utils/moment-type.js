var Moment = require('moment');

module.exports = {
  set: function (newVal) {
    if (newVal instanceof Moment) {
      return {
        type: 'moment',
        val: newVal.toISOString(),
      };
    }
    try {
      return {
        type: 'moment',
        val: Moment(newVal).toISOString(),
      };
    } catch (parseError) {
      return {
        type: typeof newVal,
        val: newVal,
      };
    }
  },
  compare: function (oldVal, newVal, attributeName) {
    return oldVal === newVal;
  },
  get: function (val) {
    return Moment(val);
  },
  'default': function () {
    return Moment().toISOString();
  },
};
