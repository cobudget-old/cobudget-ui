module.exports = (UserModel) ->
  class AllocationModel
    constructor: (data = {}) ->
      @id = data.id
      @user = new UserModel(data.user)
      @roundId = data.round_id
      @amountCents = data.amount_cents

    serialize: ->
      return {
        id: @id,
        user_id: @user.id
        round_id: @roundId
        amount_cents: @amountCents
      }

    save: (AllocationsStore) ->
      unsaved = @serialize()
      self = @
      AllocationsStore.save(unsaved).then (saved) ->
        if saved
          self.id = saved.id
