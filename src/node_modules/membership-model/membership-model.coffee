module.exports = (UserModel) ->
  class MembershipModel
    constructor: (data = {}) ->
      @id = data.id
      @groupId = data.group_id
      @user = new UserModel(data.user)

    serialize: ->
      {
        id: @id
        group_id: @groupId
        user_id: @user.id
      }

    save: (MembershipsStore) ->
      unsaved = @serialize()
      self = @
      MembershipsStore.save(unsaved).then (saved) ->
        if saved
          self.id = saved.id
