<div class="row content-row">
  <div class="col-md-6 buckets panel container">

    <header class="">
      <div class="row section titles">
        <span class="col-md-4 yourFunds">YOUR FUNDS</span>
        <span class="col-md-4 groupFunds">GROUP FUNDS</span>
        <span class="col-md-4 timeLeft">TIME LEFT</span>
      </div>

      <div class="row section details">

        <div class="col-md-4 yourDetails">
          <span contribution-status="status" class="large">
            ${{round.myAllocationsLeftCents / 100 }}
            <span class="small">/${{round.myAllocationsAmountCents / 100}}</span>
          </span>
        </div>

        <div class="col-md-4 groupDetails">
          <span class="large">
            ${{round.totalAllocated}}
            <span class="small">/${{round.totalAllocable}}</span>
          </span>
        </div>

        <div class="col-md-4 timeDetails">
          <span class="large">
            {{timeLeft}}
          </span>
        </div>

      </div>

    </header>

    <div ng-if="isAdmin" class="create-bucket">
      <button ng-click="openNewBucketModal()" class="new-bucket-button">
        Create a New Bucket
      </button>
    </div>

    <div class="bucket-list" ng-repeat="bucket in round.buckets">
      <a ui-sref="layout.round.buckets.details({ groupId: groupId, bucketId: bucket.id })">
        <div class="bucket">
          <div class="allocation_amount allocated">
          <!--<label>Allocate</label>-->
          <input contribution-status="status" type="number" min="0" max="{{ status !== 'complete' ? (round.myAllocationAmountCents ? (round.myAllocationsAmountCents / 100) : '') : bucket.myContribution.amountDollars }}" ng-model='bucket.myContribution.amountDollars' placeholder="0" ng-blur='saveContribution(bucket.myContribution)' >
          <!--<input contribution-status="status" type="number" min="0" max="{{ status !== 'complete' ? (round.myAllocationsAmountCents / 100) : bucket.myContribution.amountDollars }}" ng-model='bucket.myContribution.amountDollars' placeholder="0" ng-blur='saveContribution(bucket.myContribution)' >-->
          </div>

          <h2>{{bucket.name}}</h2>


          <div class="progress">
            <!--Got a hacky fix for progress bars here... PB cant be 0, must be empty -->
            <div id="bucket-{{bucket.id}}"
                class="progress-bar" role="progressbar"
                aria-valuenow="{{bucket.percentageFunded > 0 ? bucket.groupContributionPercentage : ''}}"
                aria-valuemin="0"
                aria-valuemax="100"
                style="width: {{ bucket.groupContributionPercentage }}% ;">
              <span class="sr-only">{{ bucket.groupContributionPercentage }}% Complete</span>
            </div>

            <div contribution-status="status"
                class="progress-bar progress-bar-warning"
                role="progressbar"
                aria-valuenow="{{bucket.myContributionPercentage > 0 ? bucket.myContributionPercentage : ''}}"
                aria-valuemin="0"
                aria-valuemax="100"
                style="width: {{ bucket.myContributionPercentage }}%;">
              <span class="sr-only">{{ bucket.myContributionPercentage }}% Complete</span>
            </div>

          </div>

          <span class="groupContributionCents " style="float: left;">${{ bucket.groupContributionCents / 100 }}</span>
          <span class="groupPlusMy" style="float: left;">+</span>
          <span contribution-status="status" class="myContributionCents" style="float: left;">${{ bucket.myContribution.amountCents / 100 }}</span>
          <span class="equalsTotal" style="float: left;">=</span>
          <span class="amountFunded" style="float: left;">${{ (bucket.groupContributionCents + bucket.myContribution.amountCents) / 100 }}</span>
          <span class="targetCents" ng-if="bucket.targetCents > 0" style="float: right">${{ bucket.targetCents / 100 }}</span>
        </div>
      </div>
    </a>

  </div>

  <div ui-view>
    <div class="bucketPlaceholder">
      Select a bucket on the left to see details.
    </div>
  </div>
</div>
