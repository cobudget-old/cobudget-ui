module.exports = ($scope, $modal, group, AuthService) ->

  $scope.isAdmin = group.isAdmin(AuthService.getCurrentUser())
  $scope.group = group

  $scope.openNewRoundModal = ->
    $modal.open(
      template: require('./new-round-modal.html')
      controller: require('./new-round-modal.coffee')
      size: 'lg'
      resolve:
        group: ->
          $scope.group
    ).result.then (round) ->
      # TODO add new round in proper sort order
      group.rounds.splice(0, 0, round)
