_ = require('lodash')

### @ngInject ###
module.exports = ($scope, $modal, group, AuthService) ->

  $scope.isAdmin = group.isAdmin(AuthService.getCurrentUser())
  $scope.group = group

  $scope.openNewRoundModal = ->
    $modal.open(
      require('round-modal')(
        group: group
      )
    ).result.then (round) ->
      # TODO add new round in proper sort order
      group.rounds.splice(0, 0, round)
