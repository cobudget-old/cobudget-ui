module.exports = ($scope, $modalInstance, RoundsStore, group) ->

  $scope.submit = (newRoundForm) ->
    $scope.submitted = true

    if newRoundForm.$invalid
      return

    newRound = {
      name: $scope.name
      group_id: group.id
      starts_at: $scope.startsAt
      ends_at: $scope.endsAt
    }

    # TODO error handling
    RoundsStore.create(newRound)
    .then (createdRound) ->
      $modalInstance.close(createdRound)

  $scope.cancel = ->
    $modalInstance.dismiss('cancel')

  $scope.openStartsAt = (ev) ->
    ev.preventDefault()
    ev.stopPropagation()

    $scope.openedStartsAt = true

  $scope.openEndsAt = (ev) ->
    ev.preventDefault()
    ev.stopPropagation()

    $scope.openedEndsAt = true
